[project]
name = "Synaptipy"
version = "0.1.0"
description = "Electrophysiology Visualization Suite"
requires-python = ">=3.9"

# ==============================================================================
# COMPLETE DEPENDENCY MANAGEMENT
# ==============================================================================
# 
# This project automatically creates the complete environment during pip install
# ALL packages are installed with EXACT versions from working synaptipy environment
# 
# CRITICAL: pip install -e . automatically handles everything!
# This ensures Qt6 system libraries are properly installed via conda
dependencies = [
    "numpy>=2.0.2",
    # --- GUI and Plotting ---
    # CRITICAL: PySide6 is NOT installed via pip - it comes from conda environment
    # Installing via pip causes Qt binary compatibility issues and plotting failures
    # The setup automatically creates the complete environment during installation
    "pyqtgraph>=0.13.7",
    # --- Core/Infra ---
    "neo>=0.14.2",
    "scipy>=1.13.1",
    # --- Export ---
    "pynwb>=3.1.2",
    "tzlocal>=5.3.1", # Recommended for timezone handling in NWB
    # --- Data Processing ---
    "h5py>=3.14.0",
    "hdmf>=4.1.0",
    "jsonschema>=4.25.1",
    "quantities>=0.16.2",
    "referencing>=0.36.2",
    "pandas>=2.3.1",
]

# ==============================================================================
# AUTOMATIC INSTALLATION FEATURES
# ==============================================================================
# 
# âœ… ONE-COMMAND INSTALLATION: pip install -e .
# âœ… AUTOMATIC ENVIRONMENT CREATION from environment.yml
# âœ… EXACT VERSION REPLICATION from working synaptipy environment
# âœ… CROSS-PLATFORM SUPPORT (Windows, macOS, Linux)
# âœ… INTELLIGENT DEPENDENCY RESOLUTION
#
# The setup automatically:
# 1. Creates synaptipy environment from environment.yml
# 2. Installs Qt6 system libraries via conda with EXACT versions (6.7.3)
# 3. Installs PySide6 via conda to match Qt6 (binary compatibility)
# 4. Installs Python packages via pip with EXACT versions
# 5. Ensures PySide6 versions match Qt system libraries exactly
# 6. Prevents Qt platform plugin and DLL loading issues
#
# CRITICAL: Qt6 and PySide6 come from controlled sources for Windows compatibility
# This matches the working environment and prevents binary compatibility issues

[project.scripts]
synaptipy-gui = "Synaptipy.application.__main__:run_gui"

# ==============================================================================
# DEVELOPMENT AND OPTIONAL DEPENDENCIES
# ==============================================================================
[project.optional-dependencies]
dev = [
    # Testing
    "pytest>=7.0.0",
    "pytest-qt>=4.0.0",
    "pytest-mock",
    "pytest-cov",
    
    # Linting & Formatting
    "flake8",
    "black",
    "isort",
    
    # Building & Distribution
    "build",
    "twine",
    
    # Documentation
    "sphinx",
    "sphinx-rtd-theme",
]

# GUI-specific dependencies (PySide6 comes from conda environment)
gui = [
    "pyqtgraph>=0.13.7",
]

# Full installation with all dependencies (PySide6 comes from conda environment)
full = [
    "numpy>=2.0.2",
    "pyqtgraph>=0.13.7",
    "neo>=0.14.2",
    "scipy>=1.13.1",
    "pynwb>=3.1.2",
    "tzlocal>=5.3.1",
    "h5py>=3.14.0",
    "hdmf>=4.1.0",
    "jsonschema>=4.25.1",
    "quantities>=0.16.2",
    "referencing>=0.36.2",
    "pandas>=2.3.1",
]

# Testing dependencies
test = [
    "pytest>=7.0.0",
    "pytest-qt>=4.0.0",
    "pytest-mock",
    "pytest-cov",
]

# ==============================================================================
# BUILD SYSTEM CONFIGURATION
# ==============================================================================
[build-system]
requires = ["setuptools>=61.0", "wheel"]
build-backend = "setuptools.build_meta"

# ==============================================================================
# PROJECT METADATA
# ==============================================================================
[project.urls]
Homepage = "https://github.com/anzalks/synaptipy"
Repository = "https://github.com/anzalks/synaptipy"
Documentation = "https://github.com/anzalks/synaptipy/docs"
Issues = "https://github.com/anzalks/synaptipy/issues"

# ==============================================================================
# INSTALLATION INSTRUCTIONS
# ==============================================================================
# 
# ðŸš€ RECOMMENDED INSTALLATION:
#    pip install -e .
#
# ðŸ”§ MANUAL ENVIRONMENT CREATION (if needed):
#    conda env create -n synaptipy -f environment.yml
#
# ðŸ”§ EXACT VERSION REPLICATION:
#    All packages are installed with EXACT versions from working synaptipy environment
#    - Qt6 system libraries: conda-forge (qt=6.7.3, pyqtgraph=0.13.7)
#    - PySide6 Python bindings: conda (pyside6=6.7.3, exact match with Qt)
#    - Python packages: pip (numpy=2.0.2, scipy=1.13.1, neo=0.14.2, pynwb=3.1.2)
#
# ðŸ“¦ ENVIRONMENT SETUP:
#    conda env create -f environment.yml -n myenv
#    conda activate myenv
#    pip install -e .
#
# âœ… VERIFICATION:
#    The environment.yml ensures all package versions match exactly
#    PySide6 versions are pinned to prevent Qt platform plugin errors